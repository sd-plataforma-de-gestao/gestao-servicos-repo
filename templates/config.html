<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuração do Site</title>
  <link rel="icon" href="/assets/favicon.png" type="image/png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Arquivos de estilo do projeto -->
  <link rel="stylesheet" href="/styles/global.css">
  <link rel="stylesheet" href="/styles/header.css">
  <link rel="stylesheet" href="/styles/sidebar.css">
  <link rel="stylesheet" href="/styles/responsive.css">
  <link rel="stylesheet" href="/styles/config.css">

</head>
<body>
  <div id="header-container"></div>
  <div id="main-content-wrapper">
    <div id="sidebar-container"></div>
    <div id="main-container">
      <div class="page-header-with-button">
        <div>
          <h2 class="page-title">Configuração do Site</h2>
          <p class="page-subtitle">Ajustes globais do sistema e personalização</p>
        </div>
      </div>

      <div class="configuracao-page">
        <form id="formConfiguracao">
          <div class="config-tabs">
            <!-- Navegação das Abas -->
            <div class="config-tabs-nav">
              <button type="button" class="config-tab-button active" data-tab="geral">
                <i class="fa fa-cog"></i>
                Geral
              </button>
              <button type="button" class="config-tab-button" data-tab="farmacia">
                <i class="fa fa-building"></i>
                Farmácia
              </button>
              <button type="button" class="config-tab-button" data-tab="usuarios">
                <i class="fa fa-users"></i>
                Usuários
              </button>
              <button type="button" class="config-tab-button" data-tab="tema">
                <i class="fa fa-palette"></i>
                Tema
              </button>
            </div>

            <!-- Conteúdo das Abas -->
            <div class="config-tabs-content">
              
              <!-- ===== ABA GERAL ===== -->
              <div class="config-tab-pane active" id="tab-geral">
                <div class="config-section">
                  <h4><i class="fa fa-info-circle"></i> Informações do Grupo</h4>
                  <div class="row g-3">
                    <div class="col-12">
                      <label for="nomeGrupo" class="form-label">Nome do Grupo que Desenvolveu *</label>
                      <input type="text" class="form-control" id="nomeGrupo" required>
                    </div>
                    <div class="col-12 col-md-6">
                      <label for="emailContato" class="form-label">E-mail de Contato *</label>
                      <input type="email" class="form-control" id="emailContato" required>
                    </div>
                    <div class="col-12 col-md-6">
                      <label for="telefoneContato" class="form-label">Telefone</label>
                      <input type="text" class="form-control" id="telefoneContato" placeholder="(00) 0000-0000">
                    </div>
                  </div>
                </div>
              </div>

              <!-- ===== ABA FARMÁCIA ===== -->
              <div class="config-tab-pane" id="tab-farmacia">
                <div class="config-section">
                  <h4><i class="fa fa-building"></i> Dados da Farmácia</h4>
                  <div class="alert alert-info">
                    <i class="fa fa-info-circle"></i>
                    <strong>Informação:</strong> Estes dados são preenchidos automaticamente com base na unidade em que você está logado.
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <label for="crfResponsavel" class="form-label">CRF do Responsável Técnico *</label>
                      <input type="text" class="form-control" id="crfResponsavel" placeholder="CRF-SP 12345" required>
                    </div>
                    <div class="col-12 col-md-6">
                      <label for="cnpjFarmacia" class="form-label">CNPJ *</label>
                      <input type="text" class="form-control" id="cnpjFarmacia" placeholder="00.000.000/0000-00" required>
                    </div>
                    <div class="col-12">
                      <label for="enderecoFarmacia" class="form-label">Endereço Completo *</label>
                      <input type="text" class="form-control" id="enderecoFarmacia" placeholder="Rua, número, bairro, cidade - UF" required>
                    </div>
                    <div class="col-12 col-md-6">
                      <label for="horarioFuncionamento" class="form-label">Horário de Funcionamento</label>
                      <input type="text" class="form-control" id="horarioFuncionamento" placeholder="08:00 - 18:00">
                    </div>
                  </div>
                </div>
              </div>

              <!-- ===== ABA USUÁRIOS ===== -->
              <div class="config-tab-pane" id="tab-usuarios">
                <div class="config-section">
                  <h4><i class="fa fa-user-plus"></i> Adicionar Novo Usuário</h4>
                  <div class="row g-3">
                    <div class="col-12 col-md-4">
                      <label for="nomeUsuario" class="form-label">Nome do Usuário *</label>
                      <input type="text" class="form-control" id="nomeUsuario">
                    </div>
                    <div class="col-12 col-md-4">
                      <label for="emailUsuario" class="form-label">E-mail *</label>
                      <input type="email" class="form-control" id="emailUsuario">
                    </div>
                    <div class="col-12 col-md-4">
                      <label for="funcaoUsuario" class="form-label">Função *</label>
                      <select class="form-select" id="funcaoUsuario">
                        <option value="">Selecione...</option>
                        <option value="admin">Admin</option>
                        <option value="farmaceutico">Farmacêutico</option>
                        <option value="atendente">Atendente</option>
                      </select>
                    </div>
                    <div class="col-12">
                      <button type="button" class="btn btn-outline-primary-custom" id="btnAdicionarUsuario">
                        <i class="fa fa-plus"></i> Adicionar Usuário
                      </button>
                    </div>
                  </div>
                </div>

                <div class="config-section">
                  <h4><i class="fa fa-users"></i> Usuários Cadastrados</h4>
                  <div class="usuarios-list" id="usuariosList">
                    <!-- Usuários serão listados aqui dinamicamente -->
                  </div>
                  <button type="button" class="btn btn-primary-custom" id="btnGerenciarUsuarios">
                    <i class="fa fa-cogs"></i> Gerenciar Usuários
                  </button>
                </div>
              </div>

              <!-- ===== ABA TEMA ===== -->
              <div class="config-tab-pane" id="tab-tema">
                <div class="config-section">
                  <h4><i class="fa fa-moon"></i> Escolher Tema</h4>
                  <div class="tema-preview">
                    <div class="tema-option claro selected" data-tema="claro">
                      <i class="fa fa-sun"></i>
                      <h6>Tema Claro</h6>
                      <small>Interface clara e limpa</small>
                    </div>
                    <div class="tema-option escuro" data-tema="escuro">
                      <i class="fa fa-moon"></i>
                      <h6>Tema Escuro</h6>
                      <small>Interface escura e moderna</small>
                    </div>
                  </div>
                </div>

                <div class="config-section">
                  <h4><i class="fa fa-palette"></i> Cor Principal</h4>
                  <div class="cor-primaria-section">
                    <div class="cor-preview" id="corPreview" style="background-color: #1a6d40;"></div>
                    <div class="flex-grow-1">
                      <label for="corPrimaria" class="form-label">Escolha a cor principal do sistema</label>
                      <input type="color" class="form-control form-control-color" id="corPrimaria" value="#1a6d40" title="Escolha a cor primária">
                    </div>
                  </div>
                  <button type="button" class="btn btn-outline-primary-custom" id="btnAplicarTema">
                    <i class="fa fa-paint-brush"></i> Aplicar Tema
                  </button>
                </div>
              </div>

            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Botão Salvar Fixo -->
  <div class="config-save-footer">
    <div class="container-fluid">
      <small class="text-muted">* Campos obrigatórios</small>
      <button type="submit" form="formConfiguracao" class="btn btn-success btn-salvar-config">
        <i class="fa fa-save"></i> Salvar Configurações
      </button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/sidebar.js"></script>
  <script>
    // Reutilizando a lógica de carregamento de templates do unidade.html
    async function loadTemplate(templatePath, containerId) {
      try {
        const response = await fetch(templatePath);
        if (!response.ok) throw new Error(`Erro ${response.status}`);
        const html = await response.text();
        document.getElementById(containerId).innerHTML = html;
      } catch (error) {
        console.error(`Erro ao carregar ${templatePath}:`, error);
      }
    }

    document.addEventListener("DOMContentLoaded", async function () {
      // Carrega Header e Sidebar
      await loadTemplate("/templates/header.html", "header-container");
      await loadTemplate("/templates/sidebar.html", "sidebar-container");

      // Inicializa funcionalidades globais (se existirem)
      if (typeof initializeSidebar === 'function') initializeSidebar();
      if (typeof initializeActionButtons === 'function') initializeActionButtons();
      if (typeof initializeTooltips === 'function') initializeTooltips();
      if (typeof initializeNavigation === 'function') initializeNavigation();
      if (typeof setActiveSidebarLink === 'function') setActiveSidebarLink();
    });
  </script>
</body>
</html>
